- job:
    name: murano-engine-app-deployment-tests-centos
    project-type: freestyle
    defaults: global
    description: "<b>This job is managed by Jenkins Job Builder, do not edit it through WebUI.</b>"
    disabled: false
    concurrent: true
    node: centos

    properties:
      - zeromq-event

    wrappers:
      - timeout:
          timeout: 30
          fail: true

    builders:
      - shell: |
          #!/bin/bash
          sudo ntpdate -u pool.ntp.org
          git clone https://git.openstack.org/openstack/murano-deployment .
          bash -x murano-ci/scripts/murano-engine-with-deployment-tests.sh

    publishers:
      - console-log-with-artifacts
      - archive:
          artifacts: 'artifacts/*'
          allow-empty: 'true'
      - junit:
          results: 'test_report$BUILD_NUMBER.xml'
          keep-long-stdio: false
    logrotate:
      daysToKeep: 30
      numToKeep: -1
      artifactDaysToKeep: 30
      artifactNumToKeep: -1